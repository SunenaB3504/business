<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Favicon: Blue Book Emoji -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>%F0%9F%93%98</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Studies</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body>
    <header class="bg-blue-900 text-white py-6 px-8">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between">
            <div>
                <h1 class="text-3xl font-bold mb-1">CBSE Class 12</h1>
                <p class="text-lg">Interactive learning for CBSE Business Studies</p>
            </div>
            <nav class="mt-4 md:mt-0 flex flex-wrap gap-6">
                <div class="relative group">
                    <button class="text-white font-semibold hover:underline focus:outline-none">Part A: Principles & Functions</button>
                    <div class="absolute left-0 mt-2 w-64 bg-white text-black rounded shadow-lg opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity z-20">
                        <a href="chapter1.html" class="block px-4 py-2 hover:bg-blue-100">Unit 1: Nature and Significance of Management</a>
                        <a href="chapter2.html" class="block px-4 py-2 hover:bg-blue-100">Unit 2: Principles of Management</a>
                        <a href="chapter3.html" class="block px-4 py-2 hover:bg-blue-100">Unit 3: Business Environment</a>
                        <a href="chapter4.html" class="block px-4 py-2 hover:bg-blue-100">Unit 4: Planning</a>
                        <a href="chapter5.html" class="block px-4 py-2 hover:bg-blue-100">Unit 5: Organising</a>
                        <a href="chapter6.html" class="block px-4 py-2 hover:bg-blue-100">Unit 6: Staffing</a>
                        <a href="chapter7.html" class="block px-4 py-2 hover:bg-blue-100">Unit 7: Directing</a>
                        <a href="chapter8.html" class="block px-4 py-2 hover:bg-blue-100">Unit 8: Controlling</a>
                    
<a href="chapter11.html" class="block px-4 py-2 hover:bg-blue-100">Unit 11: (Auto-added)</a></div>
                </div>
                <div class="relative group">
                    <button class="text-white font-semibold hover:underline focus:outline-none">Part B: Finance & Marketing</button>
                    <div class="absolute left-0 mt-2 w-64 bg-white text-black rounded shadow-lg opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity z-20">
                        <a href="chapter9.html" class="block px-4 py-2 hover:bg-blue-100">Unit 9: Financial Management</a>
                        <!-- <a href="chapter10.html" class="block px-4 py-2 hover:bg-blue-100">Unit 10: Financial Markets</a> -->
                        <a href="chapter10.html" class="block px-4 py-2 hover:bg-blue-100">Unit 10: Marketing Management</a>
                        <a href="chapter11.html" class="block px-4 py-2 hover:bg-blue-100">Unit 11: Consumer Protection</a>
                    </div>
                </div>
                <a href="#progress" class="text-white font-semibold hover:underline">Progress</a>
                <a href="#login" class="text-white font-semibold hover:underline">Login</a>
            </nav>
        </div>
    </header>
    <main class="p-8 max-w-3xl mx-auto bg-white shadow-lg mt-8 rounded-lg">
        <!-- KnowledgeCompass Details -->
        <section class="mb-8">
            <button id="knowledgeCompassBtn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">KnowledgeCompass</button>
        </section>
        <!-- Search Engine -->
        <section class="mb-8">
            <button onclick="openSearchModal()" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">Search (with Audio)</button>
        </section>
        <!-- Progress Tracking -->
        <section id="progress" class="mb-8">
            <h2 class="text-xl font-bold mb-2">Your Progress</h2>
            <div class="mb-2">App Progress</div>
            <div class="w-full bg-gray-200 rounded-full h-4 mb-4">
                <div id="app-progress" class="bg-blue-600 h-4 rounded-full" style="width: 40%"></div>
            </div>
            <div class="mb-2">Chapter 1 Progress</div>
            <div class="w-full bg-gray-200 rounded-full h-4 mb-4">
                <div id="chapter1-progress" class="bg-green-600 h-4 rounded-full" style="width: 60%"></div>
            </div>
            <div class="mb-2">Chapter 2 Progress</div>
            <div class="w-full bg-gray-200 rounded-full h-4 mb-4">
                <div id="chapter2-progress" class="bg-yellow-500 h-4 rounded-full" style="width: 20%"></div>
            </div>
            <button onclick="resumeLastPoint()" class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">Resume Last Point</button>
        </section>
        <!-- Login System -->
        <section id="login" class="mb-8">
            <h2 class="text-xl font-bold mb-2">Login</h2>
            <form id="login-form" class="space-y-4">
                <input type="text" id="username" placeholder="Username" class="w-full border rounded px-3 py-2">
                <input type="password" id="password" placeholder="Password" class="w-full border rounded px-3 py-2">
                <div class="flex gap-2">
                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Login</button>
                    <button type="button" onclick="openResetModal()" class="px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600">Forgot Password?</button>
                </div>
            </form>
            <div class="mt-4">
                <button onclick="openAdminModal()" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">Admin Panel (CRUD)</button>
            </div>
        </section>
        <!-- Mail Integration -->
        <section class="mb-8">
            <button onclick="openMailModal()" class="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">Send Notification / Mail</button>
        </section>
    </main>
    <!-- Modals -->
    <!-- KnowledgeCompass Modal -->
    <div id="knowledgeCompassModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 hidden">
        <div class="bg-white rounded-lg shadow-lg p-8 max-w-lg w-full relative">
            <button id="closeKnowledgeCompassModal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl">&times;</button>
            <h3 class="text-xl font-bold mb-4 text-blue-900">KnowledgeCompass</h3>
            <div id="knowledgeCompassContent" class="mb-4 text-gray-800">
                <div class="space-y-4 leading-relaxed">
                    <p><span class="font-semibold text-blue-800">In August 2026</span>, an entrepreneurial spark ignited between <span class="font-semibold text-blue-700">Kanishq</span>, a visionary leader, and <span class="font-semibold text-blue-700">Neil</span>, a methodical student, laying the foundation for <span class="font-semibold text-indigo-700">KnowledgeCompass</span>.</p>
                    <p>Their bold idea aimed to revolutionize education by creating an <span class="text-green-700 font-medium">innovative evaluation tool</span> and custom apps designed to bridge student learning gaps and democratize personalized learning across India.</p>
                    <p>What began as a humble partnership, born from overcoming the perils of <span class="italic text-yellow-700">unlimited liability</span> and the need for pooled resources, quickly saw demand for their <span class="font-semibold text-indigo-600">KnowledgeCompass Beta</span> soar.</p>
                    <p>Facing the monumental challenge of <span class="font-semibold text-red-700">pan-India expansion</span> and the need for massive capital, they underwent a pivotal transformation, bravely stepping into the corporate world as <span class="font-bold text-indigo-800">"KnowledgeCompass Ltd."</span></p>
                    <p>With <span class="font-semibold text-blue-700">strategic management</span>, astute financial decisions, and a keen understanding of both <span class="text-green-800">micro</span> and <span class="text-green-800">macroeconomic</span> forces, KnowledgeCompass emerged as a thriving entity, ceaselessly expanding its reach in the vast, interconnected world of commerce and education.</p>
                </div>
            </div>
            <div class="flex gap-2 mt-4">
                <button id="playKnowledgeCompassAudio" class="px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700">Play</button>
                <button id="pauseKnowledgeCompassAudio" class="px-3 py-1 bg-yellow-500 text-white rounded hover:bg-yellow-600">Pause</button>
                <button id="stopKnowledgeCompassAudio" class="px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700">Stop</button>
                <span id="knowledgeCompassAudioStatus" class="ml-2 text-sm text-gray-600"></span>
            </div>
        </div>
    </div>
    <!-- Company Modal -->
    <div id="company-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-8 max-w-lg w-full shadow-lg relative">
            <button onclick="closeCompanyModal()" class="absolute top-2 right-2 text-2xl text-gray-400 hover:text-gray-700">&times;</button>
            <h2 class="text-xl font-bold mb-4">About KnowledgeCompass</h2>
            <p>KnowledgeCompass is an edtech company founded by Neil and Kanishq, evolving from a sole proprietorship to a corporation. It focuses on innovative, student-centered business education.</p>
        </div>
    </div>
    <!-- Search Modal -->
    <div id="search-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div id="search-modal-overlay" class="absolute inset-0" onclick="closeSearchModal()"></div>
        <div class="bg-white rounded-lg p-8 max-w-lg w-full shadow-lg relative flex flex-col" style="z-index:51; height:60vh; max-height:60vh; overflow-y:auto;">
            <button onclick="closeSearchModal()" class="absolute top-2 right-2 text-2xl text-gray-400 hover:text-gray-700" style="z-index:52;">&times;</button>
            <h2 class="text-xl font-bold mb-4">Search Questions</h2>
            <input type="text" id="search-input" placeholder="Type or use mic..." class="w-full border rounded px-3 py-2 mb-4">
            <button onclick="startAudioSearch()" class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 mb-4">ðŸŽ¤ Speak</button>
            <div id="search-results" class="mt-2 flex-1 overflow-y-auto"></div>
        </div>
    </div>
    <!-- Password Reset Modal -->
    <div id="reset-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-8 max-w-md w-full shadow-lg relative">
            <button onclick="closeResetModal()" class="absolute top-2 right-2 text-2xl text-gray-400 hover:text-gray-700">&times;</button>
            <h2 class="text-xl font-bold mb-4">Reset Password</h2>
            <input type="email" id="reset-email" placeholder="Enter your email" class="w-full border rounded px-3 py-2 mb-4">
            <button onclick="sendResetMail()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Send Reset Link</button>
        </div>
    </div>
    <!-- Admin Modal (CRUD) -->
    <div id="admin-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-8 max-w-2xl w-full shadow-lg relative">
            <button onclick="closeAdminModal()" class="absolute top-2 right-2 text-2xl text-gray-400 hover:text-gray-700">&times;</button>
            <h2 class="text-xl font-bold mb-4">Admin Panel (CRUD)</h2>
            <div class="mb-2">(Demo only) Add, Edit, Delete users and questions here.</div>
            <div class="flex gap-2 mb-2">
                <input type="text" placeholder="Username" class="border rounded px-2 py-1">
                <input type="text" placeholder="Role" class="border rounded px-2 py-1">
                <button class="px-2 py-1 bg-green-600 text-white rounded">Add</button>
            </div>
            <ul class="list-disc ml-6">
                <li>Neil (Admin) <button class="text-blue-600 ml-2">Edit</button> <button class="text-red-600 ml-2">Delete</button></li>
                <li>Kanishq (User) <button class="text-blue-600 ml-2">Edit</button> <button class="text-red-600 ml-2">Delete</button></li>
            </ul>
        </div>
    </div>
    <!-- Mail Modal -->
    <div id="mail-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-8 max-w-md w-full shadow-lg relative">
            <button onclick="closeMailModal()" class="absolute top-2 right-2 text-2xl text-gray-400 hover:text-gray-700">&times;</button>
            <h2 class="text-xl font-bold mb-4">Send Notification / Mail</h2>
            <input type="email" id="mail-to" placeholder="To (email)" class="w-full border rounded px-3 py-2 mb-2">
            <input type="text" id="mail-subject" placeholder="Subject" class="w-full border rounded px-3 py-2 mb-2">
            <textarea id="mail-body" placeholder="Message" class="w-full border rounded px-3 py-2 mb-4"></textarea>
            <button onclick="sendMail()" class="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">Send</button>
        </div>
    </div>
    <footer class="bg-blue-900 text-white text-center py-4 mt-8 rounded-b-lg">
        &copy; 2025 GENZ Study Business | For Neil's Educational Needs
    </footer>
    <script>
    // --- Modal Functions ---
    function openCompanyModal() { document.getElementById('company-modal').classList.remove('hidden'); }
    function closeCompanyModal() { document.getElementById('company-modal').classList.add('hidden'); }
    function openSearchModal() { document.getElementById('search-modal').classList.remove('hidden'); }
    function closeSearchModal() { document.getElementById('search-modal').classList.add('hidden'); }
    function openResetModal() { document.getElementById('reset-modal').classList.remove('hidden'); }
    function closeResetModal() { document.getElementById('reset-modal').classList.add('hidden'); }
    function openAdminModal() { document.getElementById('admin-modal').classList.remove('hidden'); }
    function closeAdminModal() { document.getElementById('admin-modal').classList.add('hidden'); }
    function openMailModal() { document.getElementById('mail-modal').classList.remove('hidden'); }
    function closeMailModal() { document.getElementById('mail-modal').classList.add('hidden'); }

    // --- KnowledgeCompass Modal Logic ---
    let knowledgeCompassUtterance = null;
    let knowledgeCompassPaused = false;
    const knowledgeCompassBtn = document.getElementById('knowledgeCompassBtn');
    const knowledgeCompassModal = document.getElementById('knowledgeCompassModal');
    const closeKnowledgeCompassModal = document.getElementById('closeKnowledgeCompassModal');
    const playKnowledgeCompassAudio = document.getElementById('playKnowledgeCompassAudio');
    const pauseKnowledgeCompassAudio = document.getElementById('pauseKnowledgeCompassAudio');
    const stopKnowledgeCompassAudio = document.getElementById('stopKnowledgeCompassAudio');
    const knowledgeCompassAudioStatus = document.getElementById('knowledgeCompassAudioStatus');
    const knowledgeCompassContent = document.getElementById('knowledgeCompassContent');
    let synth = window.speechSynthesis;

    if (knowledgeCompassBtn && knowledgeCompassModal && closeKnowledgeCompassModal) {
        knowledgeCompassBtn.onclick = function() {
            knowledgeCompassModal.classList.remove('hidden');
        };
        closeKnowledgeCompassModal.onclick = function() {
            knowledgeCompassModal.classList.add('hidden');
            if (synth.speaking) synth.cancel();
            knowledgeCompassAudioStatus.textContent = '';
        };
        playKnowledgeCompassAudio.onclick = function() {
            if (synth.speaking) synth.cancel();
            const text = knowledgeCompassContent ? knowledgeCompassContent.textContent : '';
            if (!text) return;
            knowledgeCompassUtterance = new SpeechSynthesisUtterance(text);
            knowledgeCompassUtterance.onstart = function() {
                knowledgeCompassAudioStatus.textContent = 'Playing...';
            };
            knowledgeCompassUtterance.onend = function() {
                knowledgeCompassAudioStatus.textContent = 'Finished.';
            };
            knowledgeCompassUtterance.onerror = function() {
                knowledgeCompassAudioStatus.textContent = 'Error.';
            };
            synth.speak(knowledgeCompassUtterance);
        };
        pauseKnowledgeCompassAudio.onclick = function() {
            if (synth.speaking && !synth.paused) {
                synth.pause();
                knowledgeCompassAudioStatus.textContent = 'Paused.';
            } else if (synth.paused) {
                synth.resume();
                knowledgeCompassAudioStatus.textContent = 'Resumed.';
            }
        };
        stopKnowledgeCompassAudio.onclick = function() {
            if (synth.speaking) synth.cancel();
            knowledgeCompassAudioStatus.textContent = 'Stopped.';
        };
    }

    // --- Resume Functionality (Demo) ---
    function resumeLastPoint() {
        alert('Resuming from your last accessed point... (Demo)');
    }
    // --- Search Engine (Demo) ---
    function startAudioSearch() {
        // --- Voice search for modal ---
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        let searchStatus = document.getElementById('search-status');
        if (!searchStatus) {
            searchStatus = document.createElement('div');
            searchStatus.id = 'search-status';
            searchStatus.className = 'text-gray-600 text-sm mb-2';
            searchResults.parentNode.insertBefore(searchStatus, searchResults);
        }
        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
            alert('Speech recognition not supported in this browser.');
            return;
        }
        if (window._modalRecognition) {
            window._modalRecognition.stop();
            window._modalRecognition = null;
        }
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        window._modalRecognition = recognition;
        recognition.lang = 'en-IN';
        recognition.interimResults = false;
        recognition.maxAlternatives = 1;
        recognition.onresult = function(event) {
            const transcript = event.results[0][0].transcript;
            searchInput.value = transcript;
            performModalSearch(transcript);
        };
        recognition.onerror = function(event) {
            searchStatus.textContent = 'Audio input error: ' + event.error;
        };
        recognition.onend = function() {
            window._modalRecognition = null;
        };
        recognition.start();
        searchStatus.textContent = 'Listening...';
    }

    // --- Modal Search Logic (from search.html, mindmap definition only) ---
    const chapterFiles = [
        'chapter1.json','chapter2.json','chapter3.json','chapter4.json','chapter5.json','chapter6.json','chapter7.json','chapter8.json','chapter9.json','chapter10.json','chapter11.json'
    ];
    const searchInputModal = document.getElementById('search-input');
    const searchResultsModal = document.getElementById('search-results');
    let searchStatusModal = document.getElementById('search-status');
    if (!searchStatusModal) {
        searchStatusModal = document.createElement('div');
        searchStatusModal.id = 'search-status';
        searchStatusModal.className = 'text-gray-600 text-sm mb-2';
        searchResultsModal.parentNode.insertBefore(searchStatusModal, searchResultsModal);
    }
    function performModalSearch(query) {
        if (!query) {
            searchStatusModal.textContent = 'Please enter a search term.';
            searchResultsModal.innerHTML = '';
            return;
        }
        searchStatusModal.textContent = 'Searching all chapters...';
        searchResultsModal.innerHTML = '';
        let foundResults = [];
        let filesLoaded = 0;
        chapterFiles.forEach(filename => {
            fetch(filename)
                .then(res => res.json())
                .then(data => {
                    const results = findInChapterModal(data, filename, query);
                    if (results.length) foundResults = foundResults.concat(results);
                })
                .catch(() => {})
                .finally(() => {
                    filesLoaded++;
                    if (filesLoaded === chapterFiles.length) {
                        if (foundResults.length) {
                            searchStatusModal.textContent = `Found ${foundResults.length} result(s).`;
                            searchResultsModal.innerHTML = foundResults.join('<hr class="my-4">');
                        } else {
                            searchStatusModal.textContent = 'No results found.';
                            searchResultsModal.innerHTML = '';
                        }
                    }
                });
        });
    }
    function findInChapterModal(data, filename, query) {
        query = query.toLowerCase();
        let results = [];
        const chapters = Array.isArray(data.chapters) ? data.chapters : Object.values(data);
        chapters.forEach(chapter => {
            const chapterTitle = chapter.title || chapter.unitName || filename.replace('.json','');
            if (chapter.mindmap) {
                chapter.mindmap.forEach(node => {
                    if (node.definition && node.definition.toLowerCase().includes(query)) {
                        results.push(renderResultModal('Definition', chapterTitle, node.definition, filename, query));
                    }
                });
            }
        });
        return results;
    }
    function renderResultModal(section, chapterTitle, text, filename, query) {
        const re = new RegExp(`(${query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})`, 'gi');
        const highlighted = text.replace(re, '<span style="background:#fef08a;font-weight:bold;">$1</span>');
        return `<div class="search-result-block" style="background:#f9fafb;border-radius:0.5rem;margin-bottom:1rem;padding:1rem;box-shadow:0 2px 8px #e0e7ef;">
            <div class="text-xs text-gray-500 mb-1">${section} | <b>${chapterTitle}</b> (${filename})</div>
            <div>${highlighted}</div>
        </div>`;
    }
    // Attach search on Enter and button click
    if (searchInputModal) {
        searchInputModal.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') performModalSearch(searchInputModal.value.trim());
        });
    }
    // Optionally, you can add a search button in the modal to call performModalSearch(searchInputModal.value.trim());
    // --- Mail Integration (Demo) ---
    function sendMail() {
        alert('Mail sent! (Demo)');
    }
    function sendResetMail() {
        alert('Password reset link sent! (Demo)');
    }
    // --- Login (Demo) ---
    document.getElementById('login-form').onsubmit = function(e) {
        e.preventDefault();
        alert('Login successful! (Demo)');
    };
    </script>
    <!-- Removed duplicate content at the bottom. Footer remains above. -->
</body>
</html>
